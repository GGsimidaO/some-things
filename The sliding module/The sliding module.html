<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title>模拟滑动解锁</title>
		<style>
			* {
				padding: 0;
				margin: 0;
			}
			div {
				width: 300px;
				height: 40px;
				border: 1px solid #000;
				border-radius: 10px;
				margin: 100px auto;
				position: relative;
			}
			b {
				width: 50px;
				height: 34px;
				border-radius: 10px;
				border: 1px solid #000;
				margin: 2px;
				position: absolute;
				background: cyan;
			}
		</style>
	</head>

	<body>
		<div><b></b></div>
		<p></p>
		
		<script>
			var div = document.querySelector("div");
			var b = document.querySelector("b");
			var p = document.querySelector("p");
			var count = 0;
			b.onmousedown = (e) => {
				var e = e || event;
				var left = e.offsetX;
				b.style.zIndex = -1; //点击后让它降层
				div.onmousemove = (e) => {
					var e = e || event;
					var left2 = e.offsetX;
					if(left2 - left > 0 && left2 - left < 246) {  //滑动范围
						b.style.left = left2 - left + "px";
					}
					if(left2 - left >= 245){
						div.onmousemove = "";
						p.innerHTML = "已解锁";
						count ++; //保险机制
					}
				}
			}
			div.onmouseup = (e)=>{  //松开鼠标后滑块自动退回原点
				div.onmousemove = "";
				var e = e || event;
				var left = parseFloat(b.style.left);
				if(left < 244 && count!=0){
					b.style.zIndex = 2;//鼠标松开后让它升层
					var timer = setInterval(()=>{
						left-=2;
						b.style.left = left + "px";
						if(left <= 0){
							clearInterval(timer);
						}
					},1);
				}
			}
		</script>
	</body>

</html>
